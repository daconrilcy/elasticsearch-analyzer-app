@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// Cible le wrapper de React Flow pour surcharger le style de sélection

.react-flow__node {
  &.selected, &:focus-visible {
    .custom-node {
      box-shadow: 0 0 0 4px rgba($accent-color, 0.3), 0 20px 40px -15px $shadow-color;
    }
    outline: none;
  }
}

.custom-node {
  position: relative;
  border-radius: $border-radius-node;
  color: white;
  min-width: 180px;
  text-align: center;
  border: none;
  overflow: hidden; // Important pour les coins arrondis du contenu
  @include interactive-shadow;
  
  // Applique les dégradés
  &.custom-node-input { background: $gradient-input; }
  &.custom-node-output { background: $gradient-output; }
  &.custom-node-char_filter,
  &.custom-node-tokenizer,
  &.custom-node-token_filter { background: $gradient-tokenizer; }
}

// LA CLÉ DE LA CORRECTION : La tête a une position relative pour ses poignées
.node-header {
  position: relative;
  padding: 22px 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  strong {
    font-weight: $font-weight-bold;
    font-size: 1.15rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }
}

// Le conteneur pour la zone de texte
.node-content {
  padding: 0 16px 16px 16px; // Padding uniquement pour le contenu
}

.input-textarea {
  width: 100%;
  height: 80px;
  border: none;
  border-radius: 12px;
  padding: 12px;
  font-family: $font-family-sans;
  font-size: 1rem;
  background-color: rgba(0, 0, 0, 0.2);
  color: rgba(255, 255, 255, 0.95);
  resize: none;

  &:focus {
    outline: none;
    box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.6);
  }
}